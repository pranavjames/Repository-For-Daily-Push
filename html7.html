<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"
        integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>


    <!-- ///////////////////////////////////// -->

    <style>
        .read-more-btn{
            display: none;
        }
        #more {
            display: none;
        }
    </style>
    <script>
       
        $(document).ready(() => {

            let flagForRunOnce = true;

            function makeReadMoreVisible(index, element){

                // console.log("start",String(element.innerHTML));

                      if(String(element.innerHTML).length > 469){
                        $(element).next().next().show();
                      }
                      
                
                   let wholeText = getSuitableText($(element).text(),469);
                  
                   $(element).innerHTML = wholeText[0];
                   console.log("wholeText[0] ",wholeText[0]);
                   console.log("wholeText[1] ",wholeText[1]);
                   $(element).next().css("color","blue");
                   $(element).next().text(wholeText[1]);
                   $(element).next().hide();

           }
               if(flagForRunOnce){
               $(".content").each(makeReadMoreVisible);
               flagForRunOnce = false; 
               console.log("here at flagForRunOnce");
            }        

        });
        
        function getSuitableText(text, number) {
            for (i = number + 6; i > number - 8; i--) {
                console.log(text[i]);
                if (text[i] == " ")
                    return [text.slice(0, i + 1),text.slice(i,text.length+1)];
            }
        }

        function makeReadMoreVisibleForOwn(element){
            debugger; 
            console.log("element.innerHTML  ",element.innerHTML);
            if(String(element.textContent) == "Read More"){
                $(element).text("Read Less");
                $(element).prev().show();
            }
            else{
                $(element).text("Read More");
                $(element).prev().hide();
            }
        }

    </script>

</head>

<body>
    <div class="parent">
        <span class="content">Parent1 sibling 1 Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi sit facere ipsa eius eveniet harum in repellendus quibusdam tenetur, doloribus atque ullam nobis culpa odio aperiam ab nostrum numquam suscipit! Lorem ipsum dolor sit amet consectetur adipisicing elit. Alias praesentium dicta soluta unde, obcaecati delectus ipsa, optio reiciendis vel quaerat autem reprehenderit illo fuga numquam consequuntur minus? Optio, repellendus rerum. Lorem ipsum, dolor sit amet consectetur adipisicing elit. Minima, illo beatae. Minus, pariatur quibusdam inventore cumque enim asperiores nulla iure debitis quia perspiciatis commodi? Quo accusantium asperiores porro? Asperiores, corporis! Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nulla rem deleniti eveniet necessitatibus ab, facilis aliquam sequi doloremque maiores magni velit, consequatur veniam assumenda labore, porro quibusdam distinctio fuga reiciendis.</span>
        <span class="hidden-content"></span>
        <span class="read-more-btn btn btn-primary" onclick="makeReadMoreVisibleForOwn(this)"><b>Read More</b></span>
        
    </div>
    <hr>
    <div class="parent">
        <span class="content">Parent2 sibling 1 Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem cupiditate explicabo laudantium accusamus pariatur totam cumque quasi veniam tempore blanditiis iusto numquam voluptates id, consequuntur dicta temporibus cum eius adipisci Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat commodi eligendi vitae vel quisquam modi similique? Aut dolore hic provident, voluptas dolorem vero atque numquam sapiente et voluptatibus impedit saepe.</span>
        <span class="hidden-content"></span>
        <span class="read-more-btn btn btn-primary" onclick="makeReadMoreVisibleForOwn(this)"><b>Read More</b></span>
        
    </div>
    
   
</body>

</html>